var __defProp=Object.defineProperty,__publicField=(obj,key,value)=>((obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value:value}):obj[key]=value)(obj,"symbol"!=typeof key?key+"":key,value);function afterCallstack(callback,delay=0){setTimeout((()=>{requestAnimationFrame(callback)}),delay)}const LOAD_ATTRIBUTES_DOM="data-load-dom",LOAD_ATTRIBUTES_LOAD="data-load-load",LOAD_ATTRIBUTES_MANUAL="data-load-manual",SELECTORS$1_LAZY_MEDIA='[loading="lazy"], [data-src], [data-poster], [data-srcset]',SELECTORS$1_PICTURE="PICTURE";function setMediaAttr(el){el.dataset.src&&!el.src&&(el.src=el.dataset.src),el.dataset.srcset&&!el.srcset&&(el.srcset=el.dataset.srcset),el.dataset.poster&&!el.poster&&(el.poster=el.dataset.poster)}function setMediaSources(media){var _a;if(media)try{(null==(_a=media.parentNode)?void 0:_a.tagName)===SELECTORS$1_PICTURE?Array.from(media.parentNode.children).forEach((el=>{setMediaAttr(el)})):setMediaAttr(media)}catch(error){console.error("[LazyMedia] Error setting media sources:",error)}else console.warn("[LazyMedia] Invalid media element provided")}function setMediaSourceArray(mediaElArray){return mediaElArray.forEach((media=>setMediaSources(media)))}function initLazyMedia(){const mediaOnDOMLoad=[],mediaOnLoad=[],mediaForIntersectionObserver=[];if(document.querySelectorAll(SELECTORS$1_LAZY_MEDIA).forEach((media=>{if(media.hasAttribute(LOAD_ATTRIBUTES_DOM))mediaOnDOMLoad.push(media);else if(media.hasAttribute(LOAD_ATTRIBUTES_LOAD))mediaOnLoad.push(media);else{if(media.hasAttribute(LOAD_ATTRIBUTES_MANUAL))return;"loading"in HTMLImageElement.prototype==!1&&"IntersectionObserver"in window?mediaForIntersectionObserver.push(media):setMediaSources(media)}})),function loadMediaOnDOMLoaded(mediaElArray){const execute=()=>afterCallstack((()=>setMediaSourceArray(mediaElArray)));if("loading"!=document.readyState)return execute();document.addEventListener("DOMContentLoaded",execute)}(mediaOnDOMLoad),function loadMediaOnLoaded(mediaElArray){const execute=()=>afterCallstack((()=>setMediaSourceArray(mediaElArray)));if("complete"==document.readyState)return execute();window.addEventListener("load",execute)}(mediaOnLoad),mediaForIntersectionObserver.length>0){const io=new IntersectionObserver(((entries,observer)=>{entries.forEach((entry=>{if(entry.isIntersecting){const media=entry.target;setMediaSources(media),observer.unobserve(media)}}))}),{rootMargin:"0px 0px 500px 0px"});mediaForIntersectionObserver.forEach((media=>{io.observe(media)}))}}afterCallstack(initLazyMedia),document.addEventListener("DOMContentLoaded",initLazyMedia),document.addEventListener("shopify:section:load",(()=>afterCallstack(initLazyMedia)));const initLazyImages=initLazyMedia,_ReloadOnEvent=class _ReloadOnEvent extends HTMLElement{constructor(){super()}static registerSectionListener(sectionId,event,callback){if(!this.sectionListeners[event]){const listener=document.addEventListener(event,(eventData=>{this.handleEvent(event,eventData)}));this.sectionListeners[event]={listener:listener,sections:{}}}const sectionListener=this.sectionListeners[event];sectionListener.sections[sectionId]||(sectionListener.sections[sectionId]=[]),sectionListener.sections[sectionId].push(callback)}static async handleEvent(event,eventData){var _a;const sectionIds=Object.keys(this.sectionListeners[event].sections),url=new URL(window.location.href);(null==(_a=null==eventData?void 0:eventData.detail)?void 0:_a.variant)&&url.searchParams.set("variant",eventData.detail.variant.id),url.searchParams.set("sections",sectionIds.join(","));const sectionJSON=await this.fetchSectionHTML(url);sectionIds.forEach((sectionId=>{this.sectionListeners[event].sections[sectionId].forEach((callback=>{callback(sectionJSON[sectionId])}))}))}static async fetchSectionHTML(url){return await fetch(url).then((res=>res.json()))}static unregisterSectionListener(sectionId,event){const sectionListener=this.sectionListeners[event];delete sectionListener.sections[sectionId],0===Object.keys(sectionListener.sections).length&&(document.removeEventListener(event,sectionListener.listener),delete this.sectionListeners[event])}connectedCallback(){this.event=this.getAttribute("data-event"),this.id?(this.section=this.closest(".shopify-section"),this.sectionId=this.section.id,this.shopifySectionId=this.sectionId.replace("shopify-section-",""),"false"!==this.dataset.reloadSection&&(this.container=this.section.querySelector("[data-section-type]"),this.container&&(this.sectionType=this.container.getAttribute("data-section-type"))),_ReloadOnEvent.registerSectionListener(this.shopifySectionId,this.event,this.updateSection.bind(this))):console.error("ReloadOnEvent: No id attribute found on element")}disconnectedCallback(){_ReloadOnEvent.unregisterSectionListener(this.sectionId,this.event)}updateSection(html){this.setNewHTML(html),this.container&&this.reloadSection(),afterCallstack((()=>{initLazyImages()}),10),this.dispatchEvent(new CustomEvent("reload-on-event:loaded",{bubbles:!0,detail:{sectionId:this.sectionId,shopifySectionId:this.shopifySectionId}}))}reloadSection(){window.Shopify.theme.sections.unload(this.container);const newContainer=this.section.querySelector(`[data-section-type="${this.sectionType}"]`);newContainer?(this.container=newContainer,window.Shopify.theme.sections.load(this.sectionType,this.container)):console.error(`ReloadOnEvent reload: Failed to find the new container element with type [${this.sectionType}] after updating innerHTML.`)}async setNewHTML(html){try{if(!html)return void console.error("ReloadOnEvent setNewHTML: Fetched HTML is empty or null for section",this.shopifySectionId);const parser=new DOMParser,fetchedSelf=parser.parseFromString(html,"text/html").getElementById(this.id);fetchedSelf||console.error(`ReloadOnEvent: Could not find "self" (<reload-on-event id="${this.id}">) element within the fetched section HTML.`),this.innerHTML=fetchedSelf.innerHTML}catch(error){console.error("ReloadOnEvent setNewHTML: Error fetching or parsing HTML:",error)}}};__publicField(_ReloadOnEvent,"sectionListeners",{});let ReloadOnEvent=_ReloadOnEvent;customElements.define("reload-on-event",ReloadOnEvent);const SELECTORS_VIDEO="video",SELECTORS_SOURCES_TEMPLATE="template[data-sources]",SELECTORS_RESPONSIVE_VIDEO_WRAPPER=".responsive-video-wrapper",SELECTORS_POSTER_IMAGE=".poster-image",SELECTORS_SOUND_TOGGLE="[data-sound-toggle]",SELECTORS_ICON_PLAY="[data-icon-play]",SELECTORS_ICON_SOUND_ON="[data-icon-sound-on]",SELECTORS_ICON_SOUND_OFF="[data-icon-sound-off]";class ResponsiveVideo extends HTMLElement{constructor(){super(),this.onClick=this.onClick.bind(this),this.onResize=this.onResize.bind(this),this.onLoaded=this.onLoaded.bind(this)}connectedCallback(){this.lazyType=this.getAttribute("data-lazy-type"),this.initElements(),this.sources=this.getSources(),this.video.style.opacity="0",this.videoWrapper.addEventListener("click",this.onClick),this.video.addEventListener("loadeddata",this.onLoaded),window.addEventListener("resize",this.onResize),this.initVideo()}initVideo(){this.updateSource();const execute=()=>{this.lazyType?(this.video.setAttribute("data-src",this.currentSource),initLazyMedia()):this.load()};this.isVisible()?execute():this.observeVisibility(execute)}isVisible(){const rect=this.getBoundingClientRect();return rect.width>0&&rect.height>0}observeVisibility(callback){const observer=new IntersectionObserver((entries=>{entries.forEach((entry=>{entry.isIntersecting&&this.isVisible()&&(callback(),observer.disconnect())}))}));observer.observe(this)}initElements(){this.video=this.querySelector(SELECTORS_VIDEO),this.sourcesTemplate=this.querySelector(SELECTORS_SOURCES_TEMPLATE),this.video&&(this.poster=this.querySelector(SELECTORS_POSTER_IMAGE),this.videoWrapper=this.querySelector(SELECTORS_RESPONSIVE_VIDEO_WRAPPER),this.soundBtn=this.querySelector(SELECTORS_SOUND_TOGGLE),this.playIcon=this.querySelector(SELECTORS_ICON_PLAY),this.soundOnIcon=this.querySelector(SELECTORS_ICON_SOUND_ON),this.soundOffIcon=this.querySelector(SELECTORS_ICON_SOUND_OFF))}getSources(){return Array.from(this.sourcesTemplate.content.querySelectorAll("source")).map((s=>({src:s.getAttribute("data-src"),media:s.media})))}cleanSourceURL(src){return src.startsWith("//")&&(src=`${window.location.protocol}${src}`),new URL(src,window.location.href).href}updateSource(){const match=this.sources.find((s=>s.media&&matchMedia(s.media).matches)),fallback=this.sources.find((s=>!s.media)),nextSrc=(match||fallback||this.sources[0]).src;if(!nextSrc)return;const newSourceUrl=this.cleanSourceURL(nextSrc);if(this.video.src){if(this.cleanSourceURL(this.video.src)===newSourceUrl)return}this.currentSource=nextSrc}load(){if(this.video.src){const newSourceUrl=this.cleanSourceURL(this.currentSource);if(this.cleanSourceURL(this.video.src)===newSourceUrl)return}this.video.src=this.currentSource}onResize(){clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout((()=>{this.updateSource(),this.load();!this.video.paused&&this.video.play().catch((()=>{}))}),150)}onClick(e){e.target.closest("[data-sound-toggle]")?this.toggleSound():this.togglePlay()}togglePlay(){this.video.paused?this.video.play().catch((()=>{})):this.video.pause(),this.updateControlsUI()}toggleSound(){this.video.muted=!this.video.muted,this.updateControlsUI()}onLoaded(){this.poster&&(this.poster.style.opacity="0"),this.video.style.opacity="1",this.video.hasAttribute("autoplay")&&(this.video.muted=!0,this.video.play().catch((()=>{}))),this.updateControlsUI()}updateControlsUI(){this.playIcon&&this.playIcon.classList.toggle("hidden",!this.video.paused),this.soundOnIcon&&this.soundOffIcon&&(this.soundOnIcon.classList.toggle("hidden",this.video.muted),this.soundOffIcon.classList.toggle("hidden",!this.video.muted))}disconnectedCallback(){var _a;this.removeEventListener("click",this.onClick),null==(_a=this.soundBtn)||_a.removeEventListener("click",this.onSound),this.video.removeEventListener("loadeddata",this.onLoaded),window.removeEventListener("resize",this.onResize)}}function updateCartLength(amount){document.querySelectorAll("[data-cart-length]").forEach((el=>el.textContent=amount))}
//! Lock Body Scroll
customElements.define("responsive-video",ResponsiveVideo),document.addEventListener("cart:updated",(e=>{const itemCount=e.detail.cart.item_count;itemCount?updateCartLength(itemCount):fetch("/cart.js").then((res=>res.json())).then((data=>updateCartLength(data.item_count)))})),document.addEventListener("DOMContentLoaded",(function detectIOSDevice(){/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&document.documentElement.classList.add("is-ios")}));class SideDrawer extends HTMLElement{constructor(){super()}connectedCallback(){this.init(),Shopify.designMode&&(document.addEventListener("shopify:section:select",this.handleSectionSelect.bind(this)),document.addEventListener("shopify:section:deselect",this.handleSectionDeselect.bind(this)))}disconnectedCallback(){Shopify.designMode&&(document.removeEventListener("shopify:section:select",this.handleSectionSelect.bind(this)),document.removeEventListener("shopify:section:deselect",this.handleSectionDeselect.bind(this)))}init(){this.toggleSelector=`[${this.dataset.toggleAttribute}]`,document.querySelectorAll(this.toggleSelector).forEach((el=>{this.contains(el)||el.addEventListener("click",(()=>{this.toggle()}))})),this.addEventListener("click",this.handleDrawerClick.bind(this)),this.addEventListener("keyup",(evt=>{"Escape"===evt.key&&this.close()}))}handleDrawerClick(evt){evt.target.closest(this.toggleSelector)&&(evt.preventDefault(),this.toggle())}handleSectionSelect(event){var _a;const sectionId=null==(_a=this.closest(".shopify-section"))?void 0:_a.id;sectionId&&event.detail.sectionId===sectionId&&this.open()}handleSectionDeselect(event){var _a;const sectionId=null==(_a=this.closest(".shopify-section"))?void 0:_a.id;sectionId&&event.detail.sectionId===sectionId&&this.close()}get isOpen(){return null!==this.getAttribute("open")}toggle(){this.isOpen?this.close():this.open()}open(){this.toggleAttribute("open",!0),function lockBodyScroll(){window.unlockedScrollY=window.scrollY,console.log("locking body scroll at",window.unlockedScrollY),document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${window.unlockedScrollY}px`,document.body.style.width="100%",document.body.style.paddingRight="0px"}()}close(){this.toggleAttribute("open",!1),function unlockBodyScroll(){console.log("unlocking body scroll");const scrollY=window.unlockedScrollY||0;document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.paddingRight="",window.scrollTo(0,scrollY),delete window.unlockedScrollY}()}}customElements.define("side-drawer",SideDrawer);const _CartDrawer=class _CartDrawer extends SideDrawer{constructor(){super()}init(){super.init(),document.addEventListener("on:cart:add",this.handleCartAddEvent.bind(this)),document.addEventListener("cart:add:loading:start",this.handleCartAddLoadingStart.bind(this)),this.addEventListener("change",function debounce(fn,wait=300){let t;return(...args)=>{clearTimeout(t),t=setTimeout((()=>fn.apply(this,args)),wait)}}(this.handleChange.bind(this))),this.addEventListener("click",this.handleClick.bind(this))}handleChange(evt){this.updateQuantity(evt.target.dataset.index,evt.target.value)}handleClick(evt){const button=evt.target.closest(".js-remove-item");button&&(evt.preventDefault(),this.updateQuantity(button.dataset.index,0))}async updateQuantity(line,quantity){try{this.querySelector(`#line-item-${line}`).classList.add("is-loading");const response=await fetch(theme.routes.cartChange,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({line:line,quantity:quantity,sections:_CartDrawer.sections,sections_url:window.location.pathname})}),data=await response.json();if(!response.ok)throw new Error(data.errors||response.status);this.renderContents(data.sections)}catch(error){console.error(error)}}handleCartAddEvent(e){var _a,_b;(null==(_a=e.detail)?void 0:_a.sections)&&(null==(_b=e.detail)?void 0:_b.sections["cart-drawer"])?this.renderContents(e.detail.sections):this.refresh(),this.classList.remove("cart-loading")}handleCartAddLoadingStart(e){this.classList.add("cart-loading"),this.isOpen||this.open()}async refresh(){const response=await fetch("?sections=cart-drawer").then((res=>res.json()));this.renderContents(response,!1)}renderContents(sections,openCart=!0){sections["cart-drawer"]&&(this.innerHTML=_CartDrawer.getSafeElementHTML(sections["cart-drawer"]),openCart&&!this.isOpen&&setTimeout((()=>this.open()))),sections["cart-icon-bubble"]&&_CartDrawer.updateCartIcon(sections),initLazyMedia()}static getSafeElementHTML(html){const tmpl=document.createElement("template");return tmpl.innerHTML=html,tmpl.content.querySelector("cart-drawer").innerHTML}static updateCartIcon(sections){const cartIconBubble=document.getElementById("cart-icon-bubble");cartIconBubble&&(cartIconBubble.innerHTML=sections["cart-icon-bubble"])}};__publicField(_CartDrawer,"sections",["cart-drawer","cart-icon-bubble"]);let CartDrawer=_CartDrawer;customElements.define("cart-drawer",CartDrawer);class QuantityInput extends HTMLElement{constructor(){super()}connectedCallback(){this.input=this.querySelector("input"),this.currentQty=this.input.value,this.changeEvent=new Event("change",{bubbles:!0}),this.addEventListener("click",this.handleClick.bind(this)),this.input.addEventListener("keydown",this.handleKeydown.bind(this))}handleClick(evt){const button=evt.target.closest("button");button&&(evt.preventDefault(),"plus"===button.name?this.input.stepUp():"minus"===button.name&&this.input.stepDown(),this.input.value!==this.currentQty&&(this.input.dispatchEvent(this.changeEvent),this.currentQty=this.input.value))}handleKeydown(evt){"Enter"===evt.key&&(evt.preventDefault(),this.input.value!==this.currentQty&&(this.input.blur(),this.input.focus(),this.currentQty=this.input.value))}}customElements.define("quantity-input",QuantityInput),document.addEventListener("DOMContentLoaded",(()=>{document.addEventListener("click",(evt=>{const link="A"===evt.target.tagName?evt.target:evt.target.closest("a");link&&"A"===link.tagName&&window.location.hostname!==new URL(link.href).hostname&&(link.target="_blank")})),document.addEventListener("click",(evt=>{"A"===evt.target.tagName&&window.location.hostname===new URL(evt.target.href).hostname&&evt.target.href.includes("#")&&(document.getElementsByTagName("html")[0].style.scrollBehavior="smooth",setTimeout((()=>{document.getElementsByTagName("html")[0].style.scrollBehavior=""}),1e3))}))})),document.addEventListener("DOMContentLoaded",(function(){!async function addToCart(){const form=document.querySelector(".shopify-product-form"),button=document.querySelector(".shopify-product-form .button");form&&(button.removeAttribute("disabled"),form.addEventListener("submit",(async function(evt){evt.preventDefault(),evt.stopPropagation();const id=this.id.value;document.dispatchEvent(new CustomEvent("cart:add:loading:start",{detail:{id:id,form:this}}));try{const response=await fetch(window.Shopify.routes.root+"cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:[{id:id,quantity:1}],sections:"cart-drawer"})}),data=await response.json();console.log("response",data),this.dispatchEvent(new CustomEvent("on:cart:add",{bubbles:!0,detail:{variantId:id,sections:data.sections}}))}catch(error){console.error("Error adding item to cart:",error),window.location.href="/cart"}})))}()})),window.theme=window.theme||{},console.log("main.bundle.js loaded"),document.dispatchEvent(new CustomEvent("theme:loaded")),window.theme.loaded=!0;
//# sourceMappingURL=main.bundle.js.map
